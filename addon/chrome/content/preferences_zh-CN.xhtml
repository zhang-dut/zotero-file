<linkset>
  <html:link rel="localization" href="__addonRef__-preferences.ftl" />
</linkset>
<vbox
  id="zotero-prefpane-__addonRef__"
  onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', {window})"
>
  <groupbox>
    <html:h2>常规设置</html:h2>
    <vbox>
      <html:h3>新附件的来源文件夹</html:h3>
      <vbox>
        <label style="line-height: 2em"
          >ZotFile可以添加来自一个文件夹（如下载文件夹）的最近更改的文件作为当前选中的Zotero条目的附件。</label
        >
        <separator />
        <hbox>
          <html:input
            type="text"
            id="source-dir"
            preference="extensions.zotfile.source_dir"
            readonly="true"
            style="-moz-box-flex: 1"
          />
          <button id="choose-source-dir" label="选择……" />
        </hbox>
      </vbox>
      <html:h3>文件位置</html:h3>
      <vbox>
        <label style="line-height: 2em"
          >ZotFile可以移动新的和已有的附件到另一位置。您可以在Zotero中存储您的附件的一份拷贝以便与Zotero服务器同步文件，或者移动文件到一个自定义文件夹并从Zotero链接到此处。</label
        >
        <separator />
        <radiogroup id="zotfile-import">
          <radio label="附加文件的副本" value="true" />
          <hbox style="margin: 0" align="center">
            <radio label="自定义路径：" value="false" />
            <html:input
              type="text"
              preference="extensions.zotfile.dest_dir"
              readonly="true"
              style="-moz-box-flex: 1"
            />
            <button id="choose-dest-dir" label="选择……" />
          </hbox>
        </radiogroup>
        <hbox style="margin: 0" align="center">
          <checkbox
            native="true"
            label="使用子文件夹，其定义为"
            preference="extensions.zotfile.subfolder"
          />
          <html:input
            type="text"
            preference="extensions.zotfile.subfolderFormat"
            style="width: 100px"
          />
        </hbox>
      </vbox>
    </vbox>
  </groupbox>
  <groupbox>
    <html:h2>重命名规则</html:h2>
    <vbox>
      <html:h3>重命名格式</html:h3>
      <checkbox
        native="true"
        label="使用Zotero来重命名"
        preference="extensions.zotfile.useZoteroToRename"
      />
      <separator />

      <label style="line-height: 2em">除专利外的条目类型的格式</label>
      <html:input
        type="text"
        preference="extensions.zotfile.renameFormat"
        style="-moz-box-flex: 1"
      />
      <label style="line-height: 2em">专利的格式</label>
      <html:input
        type="text"
        preference="extensions.zotfile.renameFormat_patent"
        style="-moz-box-flex: 1"
      />
    </vbox>
    <vbox>
      <html:h3>附加设置</html:h3>
      <hbox style="margin: 0">
        <label style="line-height: 2em">多个作者间的分隔符</label>
        <html:input
          type="text"
          preference="extensions.zotfile.authors_delimiter"
          style="width: 50px"
        />
      </hbox>
      <hbox style="margin: 0">
        <checkbox
          native="true"
          label="添加用户输入到文件名。默认为"
          preference="extensions.zotfile.userInput"
        />
        <html:input
          type="text"
          preference="extensions.zotfile.userInput_Default"
          style="width: 100px"
        />
      </hbox>
      <hbox style="margin: 0">
        <checkbox
          native="true"
          label="更改为小写"
          preference="extensions.zotfile.lower_case"
        />
      </hbox>
      <hbox style="margin: 0">
        <checkbox
          native="true"
          label="替换空格"
          preference="extensions.zotfile.replace_blanks"
        />
      </hbox>
      <checkbox
        native="true"
        label="在 . 或 : 或 ? 之后截断标题"
        preference="extensions.zotfile.truncate_title"
      />
      <hbox style="margin: 0">
        <checkbox
          native="true"
          label="标题最大长度"
          preference="extensions.zotfile.truncate_title_max"
        />
        <html:input
          type="text"
          preference="extensions.zotfile.max_titlelength"
          style="width: 40px"
        />
      </hbox>
      <hbox style="margin: 0">
        <checkbox
          native="true"
          label="作者最大数目"
          preference="extensions.zotfile.truncate_authors"
        />
        <html:input
          type="text"
          preference="extensions.zotfile.max_authors"
          style="width: 40px"
        />
      </hbox>
      <hbox style="margin: 0">
        <label style="line-height: 2em">有隐去的作者时显示的作者数目</label>
        <html:input
          type="text"
          preference="extensions.zotfile.number_truncate_authors"
          style="width: 40px"
        />
      </hbox>
      <hbox style="margin: 0">
        <checkbox
          native="true"
          label="当作者被隐去时添加后缀"
          preference="extensions.zotfile.add_etal"
        />
        <html:input
          type="text"
          preference="extensions.zotfile.etal"
          style="width: 80px"
        />
      </hbox>
    </vbox>
  </groupbox>
  <groupbox>
    <html:h2>高级设置</html:h2>
    <vbox>
      <html:h3>其他高级设置</html:h3>
      <hbox align="center">
        <label style="line-height: 2em">自动重命名新附件</label>
        <menulist
          native="true"
          preference="extensions.zotfile.automatic_renaming"
        >
          <menupopup>
            <menuitem label="从不" value="1" />
            <menuitem label="总是询问（不中断）" value="2" />
            <menuitem label="仅在条目有其他附件时询问" value="3" />
            <menuitem label="总是重命名" value="4" />
            <menuitem label="在条目有其他附件时只移动不重命名" value="5" />
          </menupopup>
        </menulist>
      </hbox>
      <checkbox
        native="true"
        label="在附加新文件时询问用户"
        preference="extensions.zotfile.confirmation"
      />
      <hbox style="margin: 0" align="center">
        <checkbox
          native="true"
          label="（批量）重命名或移动大于此数目的附件时询问用户"
          preference="extensions.zotfile.confirmation_batch_ask"
        />
        <html:input
          type="text"
          preference="extensions.zotfile.confirmation_batch"
          style="width: 40px"
        />
        <label style="line-height: 2em"></label>
      </hbox>
      <checkbox
        native="true"
        label="从文件名中移除特殊字符"
        preference="extensions.zotfile.removeDiacritics"
      />
      <hbox style="margin: 0" align="center">
        <checkbox
          native="true"
          label="仅对下列文件类型生效："
          preference="extensions.zotfile.useFileTypes"
        />
        <html:input
          type="text"
          preference="extensions.zotfile.filetypes"
          style="-moz-box-flex: 1"
        />
        <label style="line-height: 2em"></label>
      </hbox>
    </vbox>
  </groupbox>
</vbox>

<groupbox>
  <html:h2>关于</html:h2>
  <vbox>
    <hbox>
      <label>ZotFile 原作者：</label>
      <label
        class="zotero-text-link"
        value="@jlegewie"
        href="https://github.com/jlegewie"
      ></label>
    </hbox>
    <hbox>
      <label>Wandering File 作者：</label>
      <label
        class="zotero-text-link"
        value="@MuiseDestiny"
        href="https://github.com/muisedestiny"
      ></label>
    </hbox>
    <hbox>
      <label>Wandering File 译者：</label>
      <label
        class="zotero-text-link"
        value="@lychichem"
        href="https://github.com/lychichem"
      ></label>
    </hbox>

    <hbox>
      <label>关注作者：</label>
      <label
        class="zotero-text-link"
        value="@Polygononon"
        href="https://space.bilibili.com/13557814"
      ></label>
    </hbox>
    <hbox>
      <label>关注译者：</label>
      <label
        class="zotero-text-link"
        value="@专业掉节操君"
        href="https://space.bilibili.com/1853712"
      ></label>
    </hbox>

    <html:label
      data-l10n-id="pref-help"
      data-l10n-args='{"time": "__buildTime__","name": "__addonName__","version":"__buildVersion__"}'
    ></html:label>
  </vbox>
</groupbox>
